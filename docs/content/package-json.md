# package.json

## 概述

在前端项目中，package.json 是一个核心的配置文件，它扮演着项目“清单”和“配置中心”的角色。可以把它理解为整个前端项目的“元信息+依赖管理+脚本管理”的集合。

::: tip
这不是一个规范，只是 package.json 的一个核心配置文件，只是前端项目开发中，package.json 的作用远不止这些。
:::

## 基本信息（Meta 信息）

package.json 中可以定义项目的基本信息，比如：

```json
{
  "name": "my-app",
  "version": "1.0.0",
  "description": "这是一个前端示例项目",
  "author": "张三",
  "license": "MIT"
}
```

- name：项目名，通常用于发布 npm 包。
- version：版本号，语义化版本（SemVer），比如 1.0.0。
- description：项目描述。
- author：作者信息。
- license：开源协议。

## 依赖管理（Dependencies）

前端项目通常依赖各种库（React、Vue、Axios 等），这些依赖都在 package.json 中声明。

```json
{
  "dependencies": {
    "vue": "^3.3.4",
    "axios": "^1.5.0"
  },
  "devDependencies": {
    "typescript": "^5.3.0",
    "vite": "^5.0.0"
  },
  "peerDependencies": {}
}
```

- dependencies：生产环境依赖，项目运行时必需。
- devDependencies：开发环境依赖，如打包工具、测试框架、TypeScript。
- peerDependencies 用来声明 你的包需要宿主项目中已经安装的某些依赖，但你自己不直接安装。也就是说，你告诉使用你包的人：“你的项目需要安装这个依赖，我不会帮你安装，但你必须提供它。”

## 脚本命令（Scripts）

```json
{
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "eslint src --fix",
    "test": "vitest run"
  }
}
```

## SemVer（语义化版本）基础

npm 和前端生态几乎都遵循 SemVer（Semantic Versioning）规范，格式为：

```
MAJOR.MINOR.PATCH
<主版本号>.<次版本号>.<补丁版本号>
```

| 部分  | 含义                          | 例子          |
| ----- | ----------------------------- | ------------- |
| MAJOR | 主版本，做了不兼容的 API 修改 | 2.0.0 → 3.0.0 |
| MINOR | 次版本，向下兼容的新功能      | 2.1.0 → 2.2.0 |
| PATCH | 修复向下兼容的 bug            | 2.1.1 → 2.1.2 |

### package.json 中的版本符号

```json
{
  "vue": "^3.3.0",
  "axios": "~1.5.0",
  "lodash": "4.17.21",
  "pinia": ">=2.0.0 <3.0.0"
}
```

### 各符号含义

| 符号              | 说明                                      | 举例                                                |
| ----------------- | ----------------------------------------- | --------------------------------------------------- |
| `^`               | 允许升级 **次版本和补丁**，但不升级主版本 | `^3.3.0` → `3.3.1`、`3.4.0` 都可以，但 `4.0.0` 不行 |
| `~`               | 允许升级 **补丁版本**，不升级次版本       | `~1.5.0` → `1.5.1` 可以，但 `1.6.0` 不行            |
| 无符号            | 精确匹配                                  | `4.17.21` 只安装这个版本                            |
| `>`/`>=`/`<`/`<=` | 范围版本                                  | `>=2.0.0 <3.0.0` → 2.x 都可以                       |
| `*`               | 任意版本                                  | 不推荐，容易出现破坏性更新                          |
